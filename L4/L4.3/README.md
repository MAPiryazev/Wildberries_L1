# Calendar HTTP Service

Небольшой HTTP‑сервис календаря событий, реализованный в рамках **Задания 18 (уровень 2)**.

Сервис предоставляет CRUD‑операции для событий, выборку событий по дню / неделе / месяцу, асинхронное логирование запросов и фоновые воркеры для напоминаний и архивации старых событий.

---

## Возможности

* Создание, обновление и удаление событий
* Получение событий:

    * на день
    * на неделю
    * на месяц
* Хранение данных в памяти (in‑memory)
* Асинхронный логгер через канал
* Фоновый воркер напоминаний
* Фоновая чистка и архивация старых событий
* Конфигурация через файл / переменные окружения
* Unit‑тесты бизнес‑логики

---


## API

### Создание события

**POST** `/create_event`

Тело запроса (JSON):

```json
{
  "user_id": 1,
  "date": "2026-02-01",
  "event": "Meeting",
  "remind_at": "2026-02-01T10:00:00"
}
```

Ответ:

```json
{ "result": "event created" }
```

---

### Обновление события

**POST** `/update_event`

```json
{
  "id": 10,
  "user_id": 1,
  "date": "2026-02-02",
  "event": "Updated meeting"
}
```

---

### Удаление события

**POST** `/delete_event`

```json
{
  "id": 10,
  "user_id": 1
}
```

---

### Получение событий на день

**GET** `/events_for_day?user_id=1&date=2026-02-01`

---

### Получение событий на неделю

**GET** `/events_for_week?user_id=1&date=2026-02-01`

---

### Получение событий на месяц

**GET** `/events_for_month?user_id=1&date=2026-02-01`

---

## Коды ответов

* `200 OK` — успешный запрос
* `400 Bad Request` — ошибка входных данных
* `503 Service Unavailable` — ошибка бизнес‑логики
* `500 Internal Server Error` — внутренняя ошибка сервера

В случае ошибки возвращается:

```json
{ "error": "error description" }
```

---

## Конфигурация

Порт и параметры сервиса задаются через конфигурационный файл или переменные окружения.

Пример:

```
PORT=8080
```

---

## Запуск

```bash
go run ./cmd/server
```

Или через Docker:

```bash
docker build -t calendar .
docker run -p 8080:8080 calendar
```

---

## Тесты

Основная бизнес‑логика покрыта unit‑тестами:

```bash
go test ./internal/service
```

---

## Примечания

Проект реализован в учебных целях, с упором на чистую архитектуру, конкурентную безопасность (goroutines, channels) и соответствие требованиям задания.
